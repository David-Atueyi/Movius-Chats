import e,{useState as o,useCallback as t,useEffect as s}from"react";import{Platform as r,View as n,Pressable as i,TextInput as l}from"react-native";import c from"twrnc";import{CameraIcon as a}from"../../assets/Icons/CameraIcon.js";import{EmojiFunnySquareIcon as m}from"../../assets/Icons/EmojiFunnySquareIcon.js";import{MicrophoneIcon as h}from"../../assets/Icons/MicrophoneIcon.js";import{PaperClipIcon as u}from"../../assets/Icons/PaperClipIcon.js";import{PaperPlaneIcon as p}from"../../assets/Icons/PaperPlaneIcon.js";import{useChatContext as d}from"../../context/ChatContext.js";import g from"./FilePreview.js";import{jsxs as C,jsx as w}from"react/jsx-runtime";const y="ios"===r.OS?32:30,I=({onSendMessage:e,onTypingStart:I,onTypingEnd:x,onAttachmentPress:f,onCameraPress:S,onAudioRecordStart:P,onAudioRecordEnd:b,CustomEmojiIcon:v,CustomAttachmentIcon:j,CustomCameraIcon:M,CustomSendIcon:O,CustomMicrophoneIcon:A,CustomFileIcon:E,CustomImagePreview:B,CustomVideoPreview:T})=>{const[F,V]=o(""),[R,z]=o({height:y,isMultiline:!1}),{theme:D,currentUserId:H,showEmojiButton:q,showAttachmentsButton:L,showCameraButton:U,showVoiceRecordButton:k,placeholder:G,previewData:J,closePreview:K}=d(),N=t((e=>{const o=Math.min(Math.max(e.nativeEvent.contentSize.height,y),118);z({height:o,isMultiline:o>y})}),[]),Q=t((()=>{const o=F.trim();(o||J)&&(e({text:o,senderId:H}),V(""),z({height:y,isMultiline:!1}))}),[F,e,H,J]);return s((()=>{F.trim()?I?.():x?.()}),[F,I,x]),C(n,{style:[c`flex-row gap-2`,D?.inputStyles?.inputSectionContainerStyle],children:[J&&w(g,{previewData:J,closePreview:K,CustomFileIcon:E,CustomImagePreview:B,CustomVideoPreview:T}),C(n,{style:[c`flex-1 bg-white px-3.5 gap-1 flex-row justify-between`,R.isMultiline?c`rounded-3xl items-end`:c`rounded-full items-center`,D?.inputStyles?.inputContainerStyle],children:[q&&w(i,{children:v?w(v,{}):w(m,{style:c.style(""+("ios"===r.OS?"h-6 w-6":"w-7 h-7"),R.isMultiline?"pb-14":"pb-0"),color:D?.colors?.inputsIconsColor||"rgba(0,0,0,0.7)"})}),w(l,{value:F,onChangeText:V,placeholder:G||"Message",style:[c`bg-transparent flex-1 pl-2 my-3`,"ios"===r.OS?c`text-[17px]`:c`text-[16px]`,{minHeight:y,maxHeight:118}],placeholderTextColor:D?.colors?.placeholderTextColor||"rgba(0, 0, 0, 0.4)",multiline:!0,textAlignVertical:"center",onContentSizeChange:N}),C(n,{style:[c`gap-4 flex-row`,R.isMultiline?c`pb-4`:c`pb-0`],children:[L&&w(i,{onPress:f,children:j?w(j,{}):w(u,{style:c.style("ios"===r.OS?"h-6 w-6":"w-7 h-7"),color:D?.colors?.inputsIconsColor||"rgba(0,0,0,0.7)"})}),U&&!F.trim()&&w(i,{onPress:S,children:M?w(M,{}):w(a,{style:c.style("ios"===r.OS?"h-6 w-6":"w-7 h-7"),color:D?.colors?.inputsIconsColor||"rgba(0,0,0,0.7)"})})]})]}),w(i,{style:[c`p-2 rounded-full bg-green-600 justify-center items-center`,{height:"ios"===r.OS?50:48,width:"ios"===r.OS?50:48,...D?.inputStyles?.sendButtonStyle}],onPress:F.trim()||J?Q:P,onLongPress:P,onPressOut:b,children:F.trim()?O?w(O,{}):w(p,{style:c.style("h-6 w-6"),color:D?.colors?.sendIconsColor||"rgba(255,255,255,0.7)"}):k?A?w(A,{}):w(h,{style:c.style("h-8 w-8"),color:D?.colors?.sendIconsColor||"rgba(255,255,255,0.7)"}):O?w(O,{}):w(p,{style:c.style("h-6 w-6"),color:D?.colors?.sendIconsColor||"rgba(255,255,255,0.7)"})})]})};var x=e.memo(I);export{x as default};
//# sourceMappingURL=ChatInput.js.map
