import e,{useRef as t,useState as r}from"react";import{Modal as o,View as n,Pressable as i,Text as l}from"react-native";import s from"react-native-image-zoom-viewer";import a from"react-native-video";import c from"twrnc";import{LoadingIcon as d}from"../../assets/Icons/LoadingIcon.js";import{XIcon as m}from"../../assets/Icons/XIcon.js";import{jsx as u,jsxs as f,Fragment as h}from"react/jsx-runtime";const p=({imageUrl:e,videoUrl:p,onClose:b})=>{const g=t(null),[y,v]=r(!1),[w,x]=r(!1);return e||p?u(o,{visible:!!e||!!p,transparent:!0,children:f(n,{style:c`top-0 bottom-0 left-0 right-0 bg-black/80 flex-1 absolute`,children:[u(i,{onPress:b,style:c`absolute right-4 top-4 p-2 rounded-full bg-slate-100/70 z-10`,children:u(m,{style:c`h-8 w-8`})}),e&&u(s,{imageUrls:[{url:e}],enableSwipeDown:!0,onSwipeDown:b,backgroundColor:"rgba(0,0,0,0.8)",enableImageZoom:!0,onSave:()=>e,renderIndicator:()=>u(h,{})}),p&&f(n,{style:c`justify-center items-center`,children:[u(a,{source:{uri:p},ref:g,shutterColor:"transparent",controls:!0,style:{width:"100%",height:"100%",borderRadius:8,position:"relative",marginHorizontal:48},controlsStyles:{hideSettingButton:!1,hideNext:!0,hidePrevious:!0},resizeMode:"contain",onLoadStart:()=>{v(!0),x(!1)},onLoad:()=>v(!1),onBuffer:({isBuffering:e})=>v(e),onError:()=>{x(!0),v(!1)}}),y&&u(n,{style:c`absolute inset-0 flex items-center justify-center bg-black/40 rounded-full`,children:u(d,{style:c.style("h-12 w-12"),spinning:!0})}),w&&u(n,{style:c`absolute inset-0 flex items-center justify-center bg-red-500/60 p-2`,children:u(l,{style:c`text-white font-bold`,children:"Failed to load video"})})]})]})}):null};var b=e.memo(p);export{b as default};
//# sourceMappingURL=MediaViewer.js.map
