{"version":3,"file":"ChatBubble.js","sources":["../../../../src/components/ChatBubble/ChatBubble.tsx"],"sourcesContent":["import React from 'react';\nimport { Image, Pressable, Text, View } from 'react-native';\nimport tw from 'twrnc';\nimport { ArrowBack2RoundedIcon } from '../../assets/Icons/ArrowBack2RoundedIcon';\nimport { useChatContext } from '../../context/ChatContext';\nimport MessageContent from './MessageContent';\nimport MessageStatus from './MessageStatus';\nimport { ChatBubbleProps } from './types';\n\nconst ChatBubble: React.FC<ChatBubbleProps> = ({\n  message,\n  isCurrentUser,\n  isFirstInSequence,\n  onLongPress,\n}) => {\n  const {\n    theme,\n    showAvatars,\n    showUserNames,\n    showBubbleTail,\n    setMediaUrl,\n    setIsVideoPlaying,\n    isVideoPlaying,\n  } = useChatContext();\n\n  const handleMediaPress = (type: 'image' | 'video', url: string) => {\n    setMediaUrl({\n      imageUrl: type === 'image' ? url : '',\n      videoUrl: type === 'video' ? url : '',\n    });\n    if (type === 'video') {\n      setIsVideoPlaying(true);\n    }\n  };\n\n  return (\n    <Pressable\n      onLongPress={onLongPress}\n      style={[\n        tw`px-2 my-1 max-w-[75%] relative`,\n        isCurrentUser ? tw`self-end mr-3` : tw`self-start ml-9`,\n        isFirstInSequence\n          ? isCurrentUser\n            ? tw`bg-green-500 rounded-tr-none`\n            : tw`bg-white rounded-tl-none`\n          : isCurrentUser\n            ? tw`bg-green-500`\n            : tw`bg-white`,\n        {\n          borderRadius: 8,\n          ...(isCurrentUser\n            ? theme?.bubbleStyle?.sent\n            : theme?.bubbleStyle?.received),\n        },\n      ]}\n    >\n      {/* Avatar & Sender Name for Group Chat */}\n      {!isCurrentUser && isFirstInSequence && showAvatars && (\n        <>\n          <View\n            style={tw`absolute w-6 h-6 rounded-full top-0 -left-9 flex-row items-center`}\n          >\n            {message.senderAvatar ? (\n              <Image\n                source={{ uri: message.senderAvatar }}\n                style={[\n                  tw`w-full h-full rounded-full`,\n                  theme?.bubbleStyle?.avatarImageStyle,\n                ]}\n                resizeMode=\"cover\"\n              />\n            ) : (\n              <Text\n                style={[\n                  tw`text-sm text-black font-semibold capitalize rounded-full bg-zinc-300 w-full h-full text-center pt-0.5`,\n                  theme?.bubbleStyle?.avatarTextStyle,\n                ]}\n              >\n                {message.senderName?.charAt(0)}\n              </Text>\n            )}\n          </View>\n          {showUserNames && message.senderName && (\n            <Text\n              style={[\n                tw`text-sm text-black font-semibold mt-1 capitalize`,\n                theme?.bubbleStyle?.userNameStyle,\n              ]}\n            >\n              {message.senderName}\n            </Text>\n          )}\n        </>\n      )}\n\n      {/* Bubble Tail */}\n      {isFirstInSequence && showBubbleTail && (\n        <ArrowBack2RoundedIcon\n          style={tw.style(\n            'absolute -top-1 w-6 h-6 stroke-transparent',\n            isCurrentUser ? '-right-3.5' : '-left-3.5 mt-[1.25px]',\n            {\n              transform: [{ rotate: isCurrentUser ? '90deg' : '180deg' }],\n            }\n          )}\n          color={\n            isCurrentUser\n              ? `${\n                  theme?.colors?.sentMessageTailColor || 'rgba(34, 197, 94,1)'\n                }`\n              : `${theme?.colors?.receivedMessageTailColor || 'white'}`\n          }\n        />\n      )}\n\n      {/* Message Content */}\n      <MessageContent\n        message={message}\n        isCurrentUser={isCurrentUser}\n        isFirstInSequence={isFirstInSequence}\n        onMediaPress={handleMediaPress}\n        isVideoPlaying={isVideoPlaying}\n      />\n\n      {/* Message Status */}\n      <MessageStatus\n        time={message.time}\n        status={isCurrentUser ? message.status : undefined}\n        isCurrentUser={isCurrentUser}\n        hasText={!!message.text}\n        hasAudio={!!message.audio}\n      />\n    </Pressable>\n  );\n};\n\nexport default React.memo(ChatBubble);\n"],"names":["ChatBubble","message","isCurrentUser","isFirstInSequence","onLongPress","theme","showAvatars","showUserNames","showBubbleTail","setMediaUrl","setIsVideoPlaying","isVideoPlaying","useChatContext","_jsxs","Pressable","style","tw","borderRadius","bubbleStyle","sent","received","children","jsxs","_Fragment","_jsx","jsx","View","senderAvatar","Image","source","uri","avatarImageStyle","resizeMode","Text","avatarTextStyle","senderName","charAt","userNameStyle","ArrowBack2RoundedIcon","transform","rotate","color","colors","sentMessageTailColor","receivedMessageTailColor","MessageContent","onMediaPress","handleMediaPress","type","url","imageUrl","videoUrl","MessageStatus","time","status","undefined","hasText","text","hasAudio","audio","ChatBubble$1","React","memo"],"mappings":"oRASA,MAAMA,EAAwCA,EAC5CC,UACAC,gBACAC,oBACAC,kBAEA,MAAMC,MACJA,EAAKC,YACLA,EAAWC,cACXA,EAAaC,eACbA,EAAcC,YACdA,EAAWC,kBACXA,EAAiBC,eACjBA,GACEC,mBAYJ,OACEC,EAAAA,KAACC,EAAAA,UAAS,CACRV,YAAaA,EACbW,MAAO,CACLC,CAAE,iCACFd,EAAgBc,CAAE,gBAAkBA,CAAE,kBACtCb,EACID,EACEc,CAAE,+BACFA,CAAE,2BACJd,EACEc,CAAE,eACFA,CAAE,WACR,CACEC,aAAc,KACVf,EACAG,GAAOa,aAAaC,KACpBd,GAAOa,aAAaE,WAE1BC,SAAA,EAGAnB,GAAiBC,GAAqBG,GACtCO,EAAAS,KAAAC,WAAA,CAAAF,SAAA,CACEG,EAAAC,IAACC,OAAI,CACHX,MAAOC,CAAE,oEAAoEK,SAE5EpB,EAAQ0B,aACPH,EAAAA,IAACI,EAAAA,MAAK,CACJC,OAAQ,CAAEC,IAAK7B,EAAQ0B,cACvBZ,MAAO,CACLC,CAAE,6BACFX,GAAOa,aAAaa,kBAEtBC,WAAW,UAGbR,EAAAC,IAACQ,OAAI,CACHlB,MAAO,CACLC,CAAE,wGACFX,GAAOa,aAAagB,iBACpBb,SAEDpB,EAAQkC,YAAYC,OAAO,OAIjC7B,GAAiBN,EAAQkC,YACxBX,EAAAA,IAACS,EAAAA,KAAI,CACHlB,MAAO,CACLC,CAAE,mDACFX,GAAOa,aAAamB,eACpBhB,SAEDpB,EAAQkC,gBAOhBhC,GAAqBK,GACpBgB,EAAAA,IAACc,EAAAA,sBAAqB,CACpBvB,MAAOC,EAAGD,MACR,6CACAb,EAAgB,aAAe,wBAC/B,CACEqC,UAAW,CAAC,CAAEC,OAAQtC,EAAgB,QAAU,aAGpDuC,MACEvC,EACI,GACEG,GAAOqC,QAAQC,sBAAwB,wBAEzC,GAAGtC,GAAOqC,QAAQE,0BAA4B,YAMxDpB,EAAAC,IAACoB,EAAc,CACb5C,QAASA,EACTC,cAAeA,EACfC,kBAAmBA,EACnB2C,aA/FmBC,CAACC,EAAyBC,KACjDxC,EAAY,CACVyC,SAAmB,UAATF,EAAmBC,EAAM,GACnCE,SAAmB,UAATH,EAAmBC,EAAM,KAExB,UAATD,GACFtC,GAAkB,EACpB,EAyFIC,eAAgBA,IAIlBa,EAAAC,IAAC2B,EAAa,CACZC,KAAMpD,EAAQoD,KACdC,OAAQpD,EAAgBD,EAAQqD,YAASC,EACzCrD,cAAeA,EACfsD,UAAWvD,EAAQwD,KACnBC,WAAYzD,EAAQ0D,UAEZ,EAIhB,IAAAC,EAAeC,EAAMC,KAAK9D"}