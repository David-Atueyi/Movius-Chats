"use strict";var e=require("react"),s=require("react-native"),t=require("react-native-video"),r=require("twrnc"),i=require("../../assets/Icons/LoadingIcon.js"),o=require("../../assets/Icons/PlayIcon.js"),l=require("../../context/ChatContext.js"),n=require("../../utils/datefunc.js"),a=require("../AudioPlayer/AudioPlayer.js"),d=require("react/jsx-runtime");const u=({message:u,onMediaPress:c,isVideoPlaying:x,isCurrentUser:y})=>{const{theme:h,showMessageStatus:j,CustomPlayIcon:m,renderCustomVideoBubbleError:b}=l.useChatContext(),g=e.useRef(null),[f,w]=e.useState(0),[v,P]=e.useState(!1),[p,q]=e.useState(!1);return d.jsxs(s.View,{children:[u.image&&d.jsx(s.Pressable,{onPress:()=>c("image",u.image),style:r`w-60 h-80 my-2`,children:d.jsx(s.Image,{source:{uri:u.image},style:r`w-full h-full rounded-lg`,resizeMode:"contain"})}),u.video&&d.jsxs(s.Pressable,{onPress:()=>c("video",u.video),style:r`w-60 h-80 my-2 justify-center items-center`,disabled:v,children:[d.jsx(t,{source:{uri:u.video},ref:g,paused:!0,style:{width:"100%",height:"100%",borderRadius:8,position:"relative"},resizeMode:"cover",onLoadStart:()=>{P(!0),q(!1)},onLoad:e=>{w(e.duration),P(!1)},onBuffer:({isBuffering:e})=>P(e),onError:()=>{q(!0),P(!1)}}),v?d.jsx(s.View,{style:r`absolute inset-0 flex items-center justify-center bg-black/40 rounded-full`,children:d.jsx(i.LoadingIcon,{style:r.style("h-12 w-12"),spinning:!0})}):p?b?b():d.jsx(s.View,{style:r`absolute inset-0 flex items-center justify-center bg-red-500/60 p-2`,children:d.jsx(s.Text,{style:r`text-white font-bold`,children:"Failed to load video"})}):d.jsxs(d.Fragment,{children:[d.jsx(s.View,{style:r`absolute bg-black/40 rounded-full`,children:m?d.jsx(m,{}):d.jsx(o.PlayIcon,{style:r.style("h-16 w-16"),color:h?.colors?.audioPlayIconColor||"white"})}),d.jsx(s.View,{style:r`absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded-md`,children:d.jsx(s.Text,{style:r`text-white text-xs font-semibold`,children:n.formatDuration(f)})})]})]}),u.audio&&d.jsx(s.View,{style:r`my-2`,children:d.jsx(a,{audioUrl:u.audio,audioId:u.id,isVideoPlaying:x})}),u.text&&d.jsx(s.Text,{style:[r`pt-1`,j?r`pb-0`:r`pb-2`,{wordBreak:"break-word",overflowWrap:"break-word"},y?h?.messageStyle?.sentTextStyle:h?.messageStyle?.receivedTextStyle],children:u.text})]})};var c=e.memo(u);module.exports=c;
//# sourceMappingURL=MessageContent.js.map
